<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles\styles_intern.css" />
    <title>Личный кабинет</title>
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,500,500i"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Личный кабинет</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Общий баланс
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Выплачено: xxx</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="#">К начислению: xxx</a></li>
              </ul>
            </li>
          </ul>
          <div class="d-flex">
            <button
              type="button"
              class="btn btn-outline-secondary"
              onclick="openForm()"
            >
              Редактировать профиль
            </button>
          </div>
          <div class="form-popup" id="myForm">
            <form>
              <div class="mb-3">
                <label for="inputName" class="form-label">Имя </label>
                <input
                  type="text"
                  name="first_name"
                  class="form-control"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputSurname" class="form-label">Фамилия </label>
                <input
                  name="last_name"
                  type="text"
                  class="form-control"
                  aria-label="First name"
                  class="form-control"
                />
              </div>
              <div class="mb-3">
                <label for="inputDate" class="form-label">Дата рождения </label>
                <input
                  type="date"
                  id="datefield"
                  class="form-control"
                  name="birth_date"
                  value="birth_date"
                  min="1923-01-01"
                  max="mydate"
                />
              </div>
              <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  placeholder=""
                  name="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label"
                  >Номер телефона</label
                >
                <input
                  type="tel"
                  class="form-control"
                  placeholder=""
                  name="phone"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label">Город</label>
                <input type="text" class="form-control" name="city" required />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label">Телеграм</label>
                <input
                  type="text"
                  class="form-control"
                  name="telegram_nickname"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label">Логин YouTrack</label>
                <input
                  type="text"
                  class="form-control"
                  name="youtrack_login"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Степень образования</label
                >
                <input
                  type="text"
                  class="form-control"
                  name="edu_lvl"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Образовательное учреждение</label
                >
                <input
                  type="text"
                  class="form-control"
                  name="edu_institut"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Уровень владения английским</label
                >
                <input
                  type="text"
                  class="form-control"
                  name="edu_spec"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Название резюме</label
                >
                <input
                  type="text"
                  class="form-control"
                  name="resume_title"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Текст сопроводительного письма</label
                >
                <textarea
                  type="text"
                  class="form-control"
                  name="cover_letter_text"
                  required
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Ключевые навыки</label
                >
                <textarea
                  type="text"
                  class="form-control"
                  name="skills"
                  required
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="inputName" class="form-label"
                  >Описание пользователя</label
                >
                <textarea
                  type="text"
                  class="form-control"
                  name="skills_detailed"
                  required
                ></textarea>
              </div>
              <button
                type="submit"
                class="btn btn-outline-success"
                onclick="update()"
              >
                Сохранить
              </button>
              <button
                type="button"
                class="btn btn-outline-danger"
                onclick="closeForm()"
              >
                Закрыть
              </button>
            </form>
          </div>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col-3"></div>
        <div class="col-6 justify-content-center" id="info">
          <h3><span id="first_name"></span></h3>
          <h3><span id="last_name"></span></h3>
          <p><span id="birth_date"></span></p>
          <p><span id="email"></span></p>
          <p><span id="phone"></span></p>
          <p><span id="city"></span></p>
          <p><span id="telegram_nickname"></span></p>
          <p><span id="youtrack_login"></span></p>
          <p><span id="edu_lvl"></span></p>
          <p><span id="edu_institut"></span></p>
          <p><span id="edu_spec"></span></p>
          <p><span id="resume_title"></span></p>
          <p><span id="cover_letter_text"></span></p>
          <p><span id="skills"></span></p>
          <p><span id="skills_detailed"></span></p>
          <p><span id="role"></span></p>
          <script>
            const first_name = "first_name";
            const last_name = "last_name";
            const birth_date = new Date('2001-01-01');
            const email = "email@email";
            const phone = "phone";
            const city = "city";
            const telegram_nickname = "@telegram_nickname";
            const youtrack_login = "youtrack_login";
            const edu_lvl = "edu_lvl";
            const edu_institut = "edu_institut";
            const edu_spec = "edu_spec";
            const resume_title = "resume_title";
            const cover_letter_text = "cover_letter_text";
            const skills = "skills";
            const skills_detailed = "skills_detailed";
            const role = "role";
            document.getElementById("first_name").innerHTML = first_name;
            document.getElementById("last_name").innerHTML = last_name;
            document.getElementById("birth_date").innerHTML = birth_date.toLocaleDateString();
            document.getElementById("email").innerHTML = email;
            document.getElementById("phone").innerHTML = phone;
            document.getElementById("city").innerHTML = city;
            document.getElementById("telegram_nickname").innerHTML =
              telegram_nickname;
            document.getElementById("youtrack_login").innerHTML =
              youtrack_login;
            document.getElementById("edu_lvl").innerHTML = edu_lvl;
            document.getElementById("edu_institut").innerHTML = edu_institut;
            document.getElementById("edu_spec").innerHTML = edu_spec;
            document.getElementById("resume_title").innerHTML = resume_title;
            document.getElementById("cover_letter_text").innerHTML =
              cover_letter_text;
            document.getElementById("skills").innerHTML = skills;
            document.getElementById("skills_detailed").innerHTML =
              skills_detailed;
            document.getElementById("role").innerHTML = role;
          </script>
        </div>
        <div class="col-3"></div>
      </div>
    </div>
    <script>
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth() + 1; //January is 0!
      var yyyy = today.getFullYear();

      if (dd < 10) {
        dd = "0" + dd;
      }

      if (mm < 10) {
        mm = "0" + mm;
      }

      today = yyyy + "-" + mm + "-" + dd;
      document.getElementById("datefield").setAttribute("max", today);
    </script>
    <script>
      function closeForm() {
        document.getElementById("myForm").style.display = "none";
      }
    </script>
    <script>
      function getInfo(
        first_name,
        last_name,
        birth_date,
        email,
        phone,
        city,
        telegram_nickname,
        youtrack_login,
        edu_lvl,
        edu_institut,
        edu_spec,
        resume_title,
        cover_letter_text,
        skills,
        skills_detailed,
        role
      ) {
        document.getElementById("first_name").innerHTML = first_name;
        document.getElementById("last_name").innerHTML = last_name;
        document.getElementById("birth_date").innerHTML = birth_date;
        document.getElementById("email").innerHTML = email;
        document.getElementById("phone").innerHTML = phone;
        document.getElementById("city").innerHTML = city;
        document.getElementById("telegram_nickname").innerHTML =
          telegram_nickname;
        document.getElementById("youtrack_login").innerHTML = youtrack_login;
        document.getElementById("edu_lvl").innerHTML = edu_lvl;
        document.getElementById("edu_institut").innerHTML = edu_institut;
        document.getElementById("edu_spec").innerHTML = edu_spec;
        document.getElementById("resume_title").innerHTML = resume_title;
        document.getElementById("cover_letter_text").innerHTML =
          cover_letter_text;
        document.getElementById("skills").innerHTML = skills;
        document.getElementById("skills_detailed").innerHTML = skills_detailed;
        document.getElementById("role").innerHTML = role;
      }
      function openForm() {
        document.getElementById("myForm").style.display = "block";
        document.querySelector('input[name="first_name"]').defaultValue =
          first_name;
        document.querySelector('input[name="last_name"]').defaultValue =
          last_name;
        document.querySelector('input[name="birth_date"]').defaultValue =
          birth_date;
        document.querySelector('input[name="email"]').defaultValue = email;
        document.querySelector('input[name="phone"]').defaultValue = phone;
        document.querySelector('input[name="city"]').defaultValue = city;
        document.querySelector('input[name="telegram_nickname"]').defaultValue =
          telegram_nickname;
        document.querySelector('input[name="youtrack_login"]').defaultValue =
          youtrack_login;
        document.querySelector('input[name="edu_lvl"]').defaultValue = edu_lvl;
        document.querySelector('input[name="edu_institut"]').defaultValue =
          edu_institut;
        document.querySelector('input[name="edu_spec"]').defaultValue =
          edu_spec;
        document.querySelector('input[name="resume_title"]').defaultValue =
          resume_title;
        document.querySelector(
          'textarea[name="cover_letter_text"]'
        ).defaultValue = cover_letter_text;
        document.querySelector('textarea[name="skills"]').defaultValue =
          "skills";
        document.querySelector(
          'textarea[name="skills_detailed"]'
        ).defaultValue = skills_detailed;
      }
    </script>
    <script>
      function update(
        first_name,
        last_name,
        birth_date,
        email,
        phone,
        city,
        telegram_nickname,
        youtrack_login,
        edu_lvl,
        edu_institut,
        edu_spec,
        resume_title,
        cover_letter_text,
        skills,
        skills_detailed
      ) {
        document.querySelector("form").addEventListener("submit", (e) => {
          e.preventDefault();
          first_name = document.querySelector('input[name="first_name"]').value;
          last_name = document.querySelector('input[name="last_name"]').value;
          birth_date = document.querySelector('input[name="birth_date"]').value;
          email = document.querySelector('input[name="email"]').value;
          phone = document.querySelector('input[name="phone"]').value;
          city = document.querySelector('input[name="city"]').value;
          telegram_nickname = document.querySelector(
            'input[name="telegram_nickname"]'
          ).value;
          youtrack_login = document.querySelector(
            'input[name="youtrack_login"]'
          ).value;
          edu_lvl = document.querySelector('input[name="edu_lvl"]').value;
          edu_institut = document.querySelector(
            'input[name="edu_institut"]'
          ).value;
          edu_spec = document.querySelector('input[name="edu_spec"]').value;
          resume_title = document.querySelector(
            'input[name="resume_title"]'
          ).value;
          cover_letter_text = document.querySelector(
            'textarea[name="cover_letter_text"]'
          ).value;
          skills = document.querySelector('textarea[name="skills"]').value;
          skills_detailed = document.querySelector(
            'textarea[name="skills_detailed"]'
          ).value;
          fetch("// как-то так примерно, тут от ситуации", {
            body: JSON.stringify({
              first_name,
              last_name,
              birth_date,
              email,
              phone,
              city,
              telegram_nickname,
              youtrack_login,
              edu_lvl,
              edu_institut,
              edu_spec,
              resume_title,
              cover_letter_text,
              skills,
              skills_detailed,
            }),
          });
          getInfo(
            first_name,
            last_name,
            birth_date,
            email,
            phone,
            city,
            telegram_nickname,
            youtrack_login,
            edu_lvl,
            edu_institut,
            edu_spec,
            resume_title,
            cover_letter_text,
            skills,
            skills_detailed,
            role
          );
          closeForm();
        });
      }
    </script>
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
    crossorigin="anonymous"
  ></script>
  </body>
</html>
